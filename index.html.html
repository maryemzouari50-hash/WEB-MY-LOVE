<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>rayen & tassnim</title>
<style>
:root{
  --accent:#ff1493;
  --accent-2:#ff66cc;
  --glass: rgba(255,255,255,0.04);
}
*{box-sizing:border-box}
body{margin:0;min-height:100vh;font-family:Inter, Arial, Helvetica, sans-serif;background:#070007;color:#fff;display:flex;align-items:center;justify-content:center}
#panel{width:92vw;max-width:1100px;height:80vh;max-height:840px;border-radius:22px;overflow:hidden;position:relative;background:linear-gradient(180deg, rgba(0,0,0,0.55), rgba(0,0,0,0.65));box-shadow:0 20px 80px rgba(0,0,0,0.6),0 0 140px rgba(255,20,147,0.12)}
.bg-canvas{position:absolute;inset:0;z-index:0}
.content{position:relative;z-index:5;height:100%;display:flex;flex-direction:column;align-items:center}
.header{padding-top:22px;text-align:center}
#overlayText{font-size:clamp(24px,5vw,56px);font-weight:800;letter-spacing:1px;margin:0;padding:6px 18px;background:linear-gradient(90deg,var(--accent),var(--accent-2));-webkit-background-clip:text;background-clip:text;color:transparent;text-shadow:0 6px 32px rgba(255,20,147,0.08)}
.subtitle{margin-top:6px;color:rgba(255,255,255,0.75);font-weight:500}
.controls{position:absolute;top:18px;right:18px;display:flex;gap:10px;z-index:10}
.btn{background:linear-gradient(180deg,rgba(255,20,147,0.18),rgba(255,20,147,0.08));border:1px solid rgba(255,20,147,0.18);padding:8px 12px;border-radius:10px;color:#fff;cursor:pointer;font-weight:600}
.btn.--ghost{background:transparent;border:1px solid rgba(255,255,255,0.06)}
.main{display:flex;gap:18px;padding:18px;flex:1;align-items:stretch;width:100%}
.left{flex:1;display:flex;flex-direction:column;gap:12px}
.canvas-wrap{flex:1;border-radius:16px;background:linear-gradient(135deg, rgba(255,20,147,0.04), rgba(255,102,204,0.02));box-shadow:inset 0 0 40px rgba(255,20,147,0.02);position:relative;overflow:hidden}
.scene-canvas{position:absolute;inset:0}
.message-box{position:absolute;left:18px;bottom:18px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));backdrop-filter:blur(6px);padding:14px;border-radius:12px;border:1px solid rgba(255,255,255,0.04);max-width:70%;max-height:220px;overflow-y:auto}
.message-box h3{margin:0;font-size:16px;color:var(--accent)}
.message-box p{margin:6px 0 0 0;color:rgba(255,255,255,0.9)}
.right{width:360px;max-width:40%;display:flex;flex-direction:column;gap:12px}
.panel-block{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,0.04);}
.gallery{display:flex;flex-wrap:wrap;gap:10px;justify-content:center}
.gallery img{width:78px;height:78px;object-fit:cover;border-radius:10px;border:2px solid transparent;cursor:pointer;transition:all .32s;box-shadow:0 10px 30px rgba(0,0,0,0.45)}
.gallery img:hover{transform:translateY(-6px) scale(1.05);border-color:rgba(255,20,147,0.18)}
.controls-row{display:flex;gap:8px;align-items:center}
.play-toggle{display:flex;align-items:center;gap:8px}
.small-muted{font-size:13px;color:rgba(255,255,255,0.6)}
.footer{padding:12px;text-align:center;color:rgba(255,255,255,0.6);font-size:13px}
#lightbox{position:fixed;inset:0;background:rgba(0,0,0,0.92);display:flex;align-items:center;justify-content:center;z-index:200;opacity:0;pointer-events:none;transition:opacity .35s}
#lightbox.show{opacity:1;pointer-events:auto}
#lightbox img{max-width:84%;max-height:84%;border-radius:14px;box-shadow:0 30px 120px rgba(0,0,0,0.7)}
#lightbox .close{position:absolute;top:24px;right:24px;background:var(--accent);border:none;color:#fff;padding:10px 14px;border-radius:10px;cursor:pointer}
@media(max-width:880px){.main{flex-direction:column}.right{width:100%;max-width:100%}}
</style>
</head>
<body>
<div id="panel">
  <canvas class="bg-canvas" id="bgCanvas"></canvas>

  <div class="content">
    <header class="header">
      <h1 id="overlayText">Rayen & Tassnim ğŸ’</h1>
      <div class="subtitle">ØµÙ†Ø¹Øª Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù„Ø§Ø¬Ù„Ùƒ ÙŠØ§ Ø­Ø¨ÙŠØ¨ØªÙŠ Ùˆ Ù†ÙˆØ± Ø¹ÙŠÙ†ÙŠ </div>
    </header>
    <div class="main">
      <div class="left">
        <div class="canvas-wrap panel-block">
          <div id="threeRoot" class="scene-canvas"></div>
          <div class="message-box">
            <h3>Ø±Ø³Ø§Ù„Ø© Ø®Ø§ØµØ©</h3>
            <p id="loveMessage">Ø­Ø¨ÙŠØ¨ÙŠØªÙŠ ØªØ§Ø³Ù†ÙŠÙ…ØŒ ÙƒÙ„ Ù„Ø­Ø¸Ø© Ù…Ø¹Ø§ÙƒÙ Ù‡ÙŠ Ù„ÙˆØ­Ø© Ù„Ø§ ØªÙ†ØªÙ‡ÙŠ Ù…Ù† Ø§Ù„Ø£Ù„ÙˆØ§Ù† ÙˆØ§Ù„Ø¯ÙØ¡ ğŸ’–</p>
          </div>
        </div>
        <div style="display:flex;gap:10px;align-items:center;justify-content:center;margin-top:8px">
          <div class="controls-row panel-block" style="flex:1;justify-content:space-between">
            <div class="play-toggle">

            </div>
            <div style="display:flex;gap:8px;align-items:center">
            </div>
          </div>
        </div>
      </div>
      <aside class="right">
        <div class="panel-block">
          <strong>Ù…Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ±</strong>
          <div class="gallery" id="gallery">
            <a href="https://i.postimg.cc/VLhY07d4/564986677-1838667270077886-7828935166090893536-n.jpg" target="_blank"><img src="https://i.postimg.cc/VLhY07d4/564986677-1838667270077886-7828935166090893536-n.jpg" alt="img1"></a>
            <a href="https://i.postimg.cc/j25bLNTW/565935896-1911581306092182-5652971259896134685-n.jpg" target="_blank"><img src="https://i.postimg.cc/j25bLNTW/565935896-1911581306092182-5652971259896134685-n.jpg" alt="img2"></a>
            <a href="https://i.postimg.cc/43QkPwNM/566472035-25233077116285658-7570214093730810588-n.jpg" target="_blank"><img src="https://i.postimg.cc/43QkPwNM/566472035-25233077116285658-7570214093730810588-n.jpg" alt="img3"></a>
            <a href="https://i.postimg.cc/8c3qc0tJ/565557128-1614457613265438-8063096542157216644-n.jpg" target="_blank"><img src="https://i.postimg.cc/8c3qc0tJ/565557128-1614457613265438-8063096542157216644-n.jpg" alt="img4"></a>
          </div>
          <div class="small-muted" style="margin-top:8px">Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø£ÙŠ ØµÙˆØ±Ø© Ù„Ø¹Ø±Ø¶Ù‡Ø§ Ø¨Ø§Ù„Ø­Ø¬Ù… Ø§Ù„ÙƒØ§Ù…Ù„</div>
        </div>
        <div class="panel-block">
          <strong>Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹</strong>
          <div style="margin-top:8px;display:flex;flex-direction:column;gap:8px">
            <label class="small-muted">Ù†Øµ Ø§Ù„Ø±Ø³Ø§Ù„Ø© (Ù…Ø±Ù†)</label>
            <textarea id="msgInput" rows="3" style="width:100%;border-radius:8px;padding:8px;background:transparent;border:1px solid rgba(255,255,255,0.04);color:#fff">Ø­Ø¨ÙŠØ¨ÙŠØªÙŠ ØªØ§Ø³Ù†ÙŠÙ…ØŒ ÙƒÙ„ Ù„Ø­Ø¸Ø© Ù…Ø¹Ø§ÙƒÙ Ù‡ÙŠ Ù„ÙˆØ­Ø© Ù„Ø§ ØªÙ†ØªÙ‡ÙŠ Ù…Ù† Ø§Ù„Ø£Ù„ÙˆØ§Ù† ÙˆØ§Ù„Ø¯ÙØ¡ ğŸ’–</textarea>
          </div>
        </div>
        <div class="panel-block">


      </aside>
    </div>
</div>

<!-- Lightbox -->
<div id="lightbox"><button class="close">Ø¥ØºÙ„Ø§Ù‚</button><img src="" alt="light"></div>

<!-- Audio -->
<audio id="audioTrack" loop crossorigin></audio>

<!-- Three.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r152/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.152.0/examples/js/postprocessing/EffectComposer.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.152.0/examples/js/postprocessing/RenderPass.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.152.0/examples/js/postprocessing/UnrealBloomPass.js"></script>

<script>
// small utility
const $ = (s,root=document)=> root.querySelector(s);

// Animated background
const bgCanvas = $('#bgCanvas'); const bgCtx = bgCanvas.getContext('2d');
function resizeBg(){bgCanvas.width = bgCanvas.clientWidth; bgCanvas.height = bgCanvas.clientHeight}
window.addEventListener('resize', resizeBg); resizeBg();
let stars=[]; for(let i=0;i<120;i++){stars.push({x:Math.random(),y:Math.random(),r:Math.random()*1.4,spd:0.2+Math.random()*0.8})}
function drawBg(t){ bgCtx.clearRect(0,0,bgCanvas.width,bgCanvas.height); const w=bgCanvas.width,h=bgCanvas.height;
 const g=bgCtx.createLinearGradient(0,0,w,h); g.addColorStop(0,'rgba(255,20,147,0.06)'); g.addColorStop(0.5,'rgba(102,0,51,0.06)'); g.addColorStop(1,'rgba(0,0,0,0.08)'); bgCtx.fillStyle=g; bgCtx.fillRect(0,0,w,h);
 stars.forEach((s,i)=>{ const x=(s.x*w + Math.sin(t*0.0004 + i)*30) |0; const y=(s.y*h + Math.cos(t*0.0003 + i)*20)|0; bgCtx.beginPath(); bgCtx.fillStyle = 'rgba(255,255,255,'+ (0.25 + Math.sin(t*0.002+i)*0.2) +')'; bgCtx.arc(x,y,s.r,0,Math.PI*2); bgCtx.fill(); });
 requestAnimationFrame(drawBg);}
requestAnimationFrame(drawBg);

// Three.js
const mount = $('#threeRoot');
const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(45, mount.clientWidth/mount.clientHeight, 0.1, 1000);
camera.position.set(0,0,22);
const renderer = new THREE.WebGLRenderer({alpha:true,antialias:true,preserveDrawingBuffer:true});
renderer.setSize(mount.clientWidth,mount.clientHeight); renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)); mount.appendChild(renderer.domElement);

const composer = new THREE.EffectComposer(renderer);
composer.addPass(new THREE.RenderPass(scene,camera));
composer.addPass(new THREE.UnrealBloomPass(new THREE.Vector2(mount.clientWidth,mount.clientHeight),1.2,0.8,0.2));

const pl = new THREE.PointLight(0xff69b4,2.2,120); pl.position.set(10,10,10); scene.add(pl);
scene.add(new THREE.AmbientLight(0x404040,0.9));

const heartShape = new THREE.Shape();
for(let t=0;t<=Math.PI*2;t+=0.01){ const x=16*Math.pow(Math.sin(t),3); const y=13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t); heartShape.lineTo(x*0.05,y*0.05); }
const geo = new THREE.ExtrudeGeometry(heartShape,{depth:0.8,bevelEnabled:true,bevelThickness:0.2,bevelSize:0.12,bevelSegments:5});
const mat = new THREE.MeshPhongMaterial({color:0xff0066,shininess:220});
const heart = new THREE.Mesh(geo,mat); heart.castShadow=true; heart.receiveShadow=true; scene.add(heart);

const particles = new THREE.Group(); scene.add(particles);
for(let i=0;i<420;i++){ const m = new THREE.Mesh(new THREE.SphereGeometry(0.03,8,8), new THREE.MeshPhongMaterial({color: new THREE.Color().setHSL( Math.random()*0.9, 0.7, 0.6)})); m.position.set((Math.random()-0.5)*16,(Math.random()-0.5)*10,(Math.random()-0.5)*6); m.speed = 0.01 + Math.random()*0.045; particles.add(m);} 

let mouseX=0, mouseY=0, pulse=0.18;
mount.addEventListener('mousemove', e=>{ const r = mount.getBoundingClientRect(); mouseX = ((e.clientX - r.left)/r.width - 0.5)*2; mouseY = (0.5 - (e.clientY - r.top)/r.height)*2; });

let angle=0;
function animate(t){ requestAnimationFrame(animate); pulse += 0.002*(Math.sin(t*0.003)); heart.scale.set(1+pulse,1+pulse,1+pulse); heart.rotation.y = mouseX*Math.PI; heart.rotation.x = mouseY*Math.PI*0.5; particles.children.forEach(p=>{ p.position.y += p.speed; p.position.x += Math.sin(t*0.0009 + p.position.z)*0.004 + mouseX*0.15; if(p.position.y>8) p.position.y = -8; }); angle += 0.002; camera.position.x = Math.sin(angle)*22; camera.position.z = Math.cos(angle)*22; camera.lookAt(0,0,0); composer.render(); }
requestAnimationFrame(animate);

window.addEventListener('resize', ()=>{ renderer.setSize(mount.clientWidth,mount.clientHeight); composer.setSize(mount.clientWidth,mount.clientHeight); camera.aspect = mount.clientWidth/mount.clientHeight; camera.updateProjectionMatrix(); });

const lightbox = $('#lightbox'); const lightboxImg = $('#lightbox img');
document.querySelectorAll('#gallery img').forEach(img=>{ img.addEventListener('click', ()=>{ lightboxImg.src = img.src; lightbox.classList.add('show'); }); });
$('#lightbox .close').addEventListener('click', ()=> lightbox.classList.remove('show'));
lightbox.addEventListener('click', e=>{ if(e.target === lightbox) lightbox.classList.remove('show'); });

const audio = $('#audioTrack'); const playBtn = $('#playAudio'); let audioPlaying = false;
playBtn.addEventListener('click', async ()=>{
  if(!audio.src){ alert('Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ù…Ø¶Ø§ÙØ©. Ø¶Ø¹ Ø±Ø§Ø¨Ø· mp3 ÙÙŠ Ø§Ù„Ø¹Ù†ØµØ± audio'); return; }
  if(!audioPlaying){ try{ await audio.play(); audioPlaying=true; playBtn.textContent='Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰'; }catch(err){ alert('Ø§Ø¶ØºØ· Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ù„Ù„ØªØ´ØºÙŠÙ„'); }}else{ audio.pause(); audioPlaying=false; playBtn.textContent='ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰'; }
});

const pulseRange = $('#pulseRange'); pulseRange.addEventListener('input', e=>{ pulse = parseFloat(e.target.value); });
$('#applyMsg').addEventListener('click', ()=>{ $('#loveMessage').textContent = $('#msgInput').value; });

let heartsOn=false; const heartsToggle = $('#toggleHearts'); heartsToggle.addEventListener('click', ()=>{ heartsOn = !heartsOn; heartsToggle.textContent = heartsOn? 'Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù‚Ù„ÙˆØ¨' : 'Ù‚Ù„Ø¨ Ù…ØªØ·Ø§ÙŠØ±'; if(heartsOn) startHearts(); else stopHearts(); });
let heartsInterval=null;
function startHearts(){ heartsInterval = setInterval(()=>{ const h = document.createElement('div'); h.textContent='ğŸ’–'; h.style.position='fixed'; h.style.left = (20 + Math.random()*60)+'%'; h.style.fontSize = (12 + Math.random()*28)+'px'; h.style.top='90%'; h.style.zIndex=999; h.style.pointerEvents='none'; document.body.appendChild(h); const dur = 3500 + Math.random()*2000; h.animate([{transform:'translateY(0) scale(1)', opacity:1},{transform:'translateY(-380px) scale(1.25)', opacity:0}],{duration:dur,easing:'ease-out'}).onfinish = ()=> h.remove(); }, 420); }
function stopHearts(){ if(heartsInterval) clearInterval(heartsInterval); document.querySelectorAll('body > div').forEach(d=>{ if(d.textContent==='ğŸ’–') d.remove(); }); }

$('#downloadZip').addEventListener('click', ()=>{
  const html = `<!doctype html>\n${document.documentElement.outerHTML}`;
  const blob = new Blob([html], {type:'text/html'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a'); a.href = url; a.download = 'rayen_tassnim_panel.html'; a.click(); URL.revokeObjectURL(url);
});

$('#themeToggle').addEventListener('click', ()=>{
  document.documentElement.style.setProperty('--accent', getComputedStyle(document.documentElement).getPropertyValue('--accent') === '#ff1493' ? '#ffd700' : '#ff1493');
  document.documentElement.style.setProperty('--accent-2', getComputedStyle(document.documentElement).getPropertyValue('--accent-2') === '#ff66cc' ? '#ffb6c1' : '#ff66cc');
});
</script>
</body>
</html>
